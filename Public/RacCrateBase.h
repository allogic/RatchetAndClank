#pragma once

#include "CoreMinimal.h"

#include "GameFramework/Actor.h"

#include "RacCrateBase.generated.h"

class UStaticMeshComponent;

class UNiagaraSystem;
class USoundCue;

UCLASS()
class RATCHETANDCLANK_API ARacCrateBase : public AActor
{
	GENERATED_BODY()

  ////////////////////////////////////////////////////////////////////////
  // Sub Components
  ////////////////////////////////////////////////////////////////////////

protected:

  UPROPERTY(EditAnywhere, Category = RacComponent)
    UStaticMeshComponent* mComponentMesh = nullptr;

  ////////////////////////////////////////////////////////////////////////
  // Constructor
  ////////////////////////////////////////////////////////////////////////

public:

	ARacCrateBase();

protected:

	virtual void BeginPlay() override;
	virtual void Tick(float DeltaTime) override;

  ////////////////////////////////////////////////////////////////////////
  // Collision System
  ////////////////////////////////////////////////////////////////////////

private:

  UFUNCTION()
    void OnBeginOverlap(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int OtherBodyIndex, bool FromSweep, const FHitResult& SweepResult);

  ////////////////////////////////////////////////////////////////////////
  // Effect System
  ////////////////////////////////////////////////////////////////////////

private:

  UNiagaraSystem* mNiagaraBoltBurst = nullptr;
  UNiagaraSystem* mNiagaraCrateExplosion = nullptr;

  ////////////////////////////////////////////////////////////////////////
  // Sound System
  ////////////////////////////////////////////////////////////////////////

protected:

  USoundCue* mSoundExplosion = nullptr;
};